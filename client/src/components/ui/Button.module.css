/* Button.module.css */
.btn {
    --btn-color: var(--color-brand-primary);

    /* Core Styles */
    padding: var(--space-sm) var(--space-md);
    border-radius: var(--radius-md);
    border: 1px solid transparent;
    /* Added to prevent layout shift on outline */
    font-weight: var(--font-semibold);
    font-size: var(--text-base);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    cursor: pointer;
    transition: all var(--transition-base);
    font-family: inherit;
    background: var(--btn-color);
    color: oklch(from var(--btn-color) 100% 0 0);

    --btn-shadow: var(--shadow-md);

    &:hover:not(:disabled) {
        background: oklch(from var(--btn-color) calc(l - .1) c h);
        transform: translateY(-1px);
        box-shadow:
            var(--btn-shadow),
            0 6px 15px oklch(from var(--btn-color) 40% 0.05 h / 0.1);
    }

    &:active:not(:disabled) {
        transform: translateY(0);
    }

    /* Dark mode - Convert shadow to colorful halo/glow */
    :global(.dark) &:hover:not(:disabled) {
        box-shadow:
            var(--btn-shadow),
            0 0 20px oklch(from var(--btn-color) 60% 0.2 h / 0.4);
    }

    &.flat:hover:not(:disabled) {
        transform: none;
        box-shadow: none;
    }

    &:disabled {
        opacity: 0.5;
        cursor: not-allowed;
    }

    /* Sizes */
    &.xs {
        padding: 0.125rem 0.5rem;
        font-size: 0.75rem;
        height: 1.5rem;
    }

    .sm {
        padding: var(--space-xs) var(--space-sm);
        font-size: var(--text-sm);
    }

    &.lg {
        padding: var(--space-md) var(--space-lg);
        font-size: var(--text-lg);
    }

    /* Color Intents */
    &.secondary {
        --btn-color: var(--color-brand-secondary);
    }

    &.success {
        --btn-color: var(--color-success);
    }

    &.warning {
        --btn-color: var(--color-warning);
    }

    &.danger {
        --btn-color: var(--color-error);
    }

    &.info {
        --btn-color: var(--color-info);
    }

    /* Visual Variants */
    &.outline {
        background: transparent;
        color: var(--btn-color);
        border-color: var(--btn-color);

        &:hover:not(:disabled) {
            background: oklch(from var(--btn-color) 95% calc(c / 3) h);
        }
    }

    &.ghost {
        background: transparent;
        color: var(--btn-color);

        &:hover:not(:disabled) {
            background: oklch(from var(--btn-color) 95% calc(c / 3) h);
        }
    }

    /* Grouped Variant */
    &.grouped {
        border-radius: 0;
        box-shadow: none; /* Shadow on group items looks weird */
        
        &:hover:not(:disabled) {
            transform: none; /* Keep group cohesive */
            z-index: 1; /* Bring hovered button to front for border clarity */
        }

        &:not(:first-of-type) {
            margin-left: -1px;
        }

        &:first-of-type {
            border-top-left-radius: var(--radius-md);
            border-bottom-left-radius: var(--radius-md);
        }

        &:last-of-type {
            border-top-right-radius: var(--radius-md);
            border-bottom-right-radius: var(--radius-md);
        }
    }
}